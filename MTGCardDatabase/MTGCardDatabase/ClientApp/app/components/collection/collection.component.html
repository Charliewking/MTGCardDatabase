<div class="container-fluid">
    <div class="row main-row">
        <div class="col">
            <h1>Collection</h1>
        </div>
    </div>

    <div class="row main-row">
        <div class="col-sm-6">
            <form class="form-inline">
                <div class="form-group mx-sm-3 mb-2">
                    <select class="form-control" [(ngModel)]="rarityString" value="Rarity" name="rarityQuery">
                        <option value="">Select Rarity</option>
                        <option value="mythic">Mythic</option>
                        <option value="rare">Rare</option>
                        <option value="uncommon">Uncommon</option>
                        <option value="common">Common</option>
                    </select>

                    <input class="form-control" type="text" id="searchCollection1" [(ngModel)]="queryString" placeholder="Search Collection" name="searchQuery">
                    <!--<button class="form-control btn btn-success" (click)="_httpCardService.searchCollection(queryString)">Search For Card on Scryfall</button>-->
                    <button class="form-control btn btn-success" (click)="_scryfallService.getCard(queryString)">Search For Card on Scryfall</button>
                </div>
            </form>

            <h4 *ngIf="collectionValue != ''" >Collection Value ${{collectionValue}}</h4>
        </div>
    </div>

    <div class="row main-row">
        <div class="col">
            <a (click)="setFilter('G')" *ngIf="!greenFilter"><img src="../../assets/magic-mana-small/mana_g.png" style="height:25px;width:25px;" /></a>
            <a (click)="setFilter('G')" *ngIf="greenFilter"><img src="../../assets/magic-mana-embossed/mana_g.png" style="height:25px;width:25px;" /></a>

            <a (click)="setFilter('R')" *ngIf="!redFilter"><img src="../../assets/magic-mana-small/mana_r.png" style="height:25px;width:25px;" /></a>
            <a (click)="setFilter('R')" *ngIf="redFilter"><img src="../../assets/magic-mana-embossed/mana_r.png" style="height:25px;width:25px;" /></a>

            <a (click)="setFilter('U')" *ngIf="!blueFilter"><img src="../../assets/magic-mana-small/mana_u.png" style="height:25px;width:25px;" /></a>
            <a (click)="setFilter('U')" *ngIf="blueFilter"><img src="../../assets/magic-mana-embossed/mana_u.png" style="height:25px;width:25px;" /></a>

            <a (click)="setFilter('B')" *ngIf="!blackFilter"><img src="../../assets/magic-mana-small/mana_b.png" style="height:25px;width:25px;" /></a>
            <a (click)="setFilter('B')" *ngIf="blackFilter"><img src="../../assets/magic-mana-embossed/mana_b.png" style="height:25px;width:25px;" /></a>

            <a (click)="setFilter('W')" *ngIf="!whiteFilter"><img src="../../assets/magic-mana-small/mana_w.png" style="height:25px;width:25px;" /></a>
            <a (click)="setFilter('W')" *ngIf="whiteFilter"><img src="../../assets/magic-mana-embossed/mana_w.png" style="height:25px;width:25px;" /></a>
        </div>
    </div>

    <div class="row main-row">
        <div class="col">
            <notification *ngIf="_httpCardService.errorText != ''" [alert]="_httpCardService.errorText"></notification>
        </div>
    </div>

    <div class="row main-row">
        <div class="col" *ngIf="!_httpCardService.cards[1]">
            <h1><em>Loading...</em></h1>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6" *ngFor="let card of _httpCardService.cards | cardRarityFilter: rarityString | cardTextFilter: queryString; let i = index">
            <div class="card">
                <div class="card-img-top">
                    <!--(mouseover)="hoveredover=card.name" (mouseout)="hoveredover=''" [ngClass]="[(hoveredover == card.name) ? 'hoveredCard' : '']"-->
                    <img class="card-img-top" style="background-color:transparent;" src={{card.image_Normal}} alt="Card image cap">
                    <!--<h2 *ngIf="hoveredover == card.name" style="color:black;z-index:9;margin-top:-45px;position:absolute;margin-left:auto;margin-right:auto;width:auto;">
                    <a (click)="incrementCardCount(card)" class="btn btn-default btn-circle">+</a>
                    {{ card.numberInCollection }}
                    <a (click)="decrementCardCount(card)" class="btn btn-default btn-circle">&nbsp;-&nbsp;</a>
                </h2>-->
                </div>
                <div class="card-body">
                    <div class="row" style="margin-left:1%;">
                        <h5 class="card-title">{{card.name}}</h5>
                    </div>
                    <div class="row" style="margin-left:2%;">
                        <mana-cost style="margin-right:10px;" [mana]="card.mana_Cost"></mana-cost>
                        <h4 style="margin-top: 4px;"> ${{card.price}}</h4>
                    </div>
                    <div class="row" style="margin-left:2%;">
                        <h2 style="margin-top: 4px;"> 
                            <a (click)="incrementCardCount(card)" class="btn btn-default btn-circle">+</a>                
                            {{ card.numberInCollection }} 
                            <a (click)="decrementCardCount(card)" class="btn btn-default btn-circle">&nbsp;-&nbsp;</a>
                        </h2>
                    </div>
                    <!--<p class="card-text">{{card.card_Text}}</p>-->
                    <!--<br />-->
                    <!--<button style="margin:auto;" (click)="addCard(card)" class="btn">Add to Deck</button>-->
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <button class="btn btn-primary form-control" (click)="_httpCardService.getNextPageCards(_httpCardService.currentToken)">Next 100 Cards</button>
        </div>
    </div>

    <div class="row main-row">
        <div class="col" *ngFor="let card of _scryfallService.returnCards">
            <div class="card">
                <img class="card-img-top" style="background-color:transparent;" src={{card.image_Normal}} alt="Card image cap">
                <div class="card-body">
                    <div class="row" style="margin-left:1%;">
                        <h5 class="card-title">{{card.name}}</h5>
                    </div>
                    <div class="row" style="margin-left:2%;">
                        <mana-cost style="margin-right:10px;" [mana]="card.mana_Cost"></mana-cost>
                        <h4 style="margin-top: 4px;"> ${{card.price}}</h4>
                    </div>
                    <div class="row" style="margin-left:2%;">
                        <input class="form-control" [(ngModel)]="addCardCount" />
                        <a (click)="addCard(card, addCardCount)" class="btn btn-primary form-control">Add {{addCardCount}} to Collection</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>